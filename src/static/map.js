(() => {
  /*
    e -- Empty
    b -- Block
    c -- Coin
    p -- Power
    t -- Tunnel
    y -- Pac Man
    g1 -- Ghost
    g2 -- Ghost
    g3 -- Ghost
    g4 -- Ghost
*/
  const map = [
    [
      { value: "e" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "e" },
    ],
    [
      { value: "e" },
      { value: "b" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "b" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "b" },
      { value: "e" },
    ],
    [
      { value: "e" },
      { value: "b" },
      { value: "p" },
      { value: "b" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "b" },
      { value: "p" },
      { value: "b" },
      { value: "e" },
    ],
    [
      { value: "e" },
      { value: "b" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "b" },
      { value: "e" },
    ],
    [
      { value: "e" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "e" },
    ],
    [
      { value: "e" },
      { value: "b" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "b" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "b" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "b" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "b" },
      { value: "e" },
    ],
    [
      { value: "e" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "e" },
      { value: "b" },
      { value: "e" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "e" },
    ],
    [
      { value: "e" },
      { value: "e" },
      { value: "e" },
      { value: "e" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "e" },
      { value: "e" },
      { value: "e" },
      { value: "g1" },
      { value: "e" },
      { value: "e" },
      { value: "e" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "e" },
      { value: "e" },
      { value: "e" },
      { value: "e" },
    ],
    [
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "e" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "e" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
    ],
    [
      { value: "e" },
      { value: "e" },
      { value: "e" },
      { value: "e" },
      { value: "e" },
      { value: "c" },
      { value: "e" },
      { value: "e" },
      { value: "b" },
      { value: "g2" },
      { value: "g3" },
      { value: "g4" },
      { value: "b" },
      { value: "e" },
      { value: "e" },
      { value: "c" },
      { value: "e" },
      { value: "e" },
      { value: "e" },
      { value: "e" },
      { value: "e" },
    ],
    [
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "e" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "e" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
    ],
    [
      { value: "e" },
      { value: "e" },
      { value: "e" },
      { value: "e" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "e" },
      { value: "e" },
      { value: "e" },
      { value: "e" },
      { value: "e" },
      { value: "e" },
      { value: "e" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "e" },
      { value: "e" },
      { value: "e" },
      { value: "e" },
    ],
    [
      { value: "e" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "e" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "e" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "e" },
    ],
    [
      { value: "e" },
      { value: "b" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "b" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "b" },
      { value: "e" },
    ],
    [
      { value: "e" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "e" },
    ],
    [
      { value: "e" },
      { value: "b" },
      { value: "p" },
      { value: "c" },
      { value: "b" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "y" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "b" },
      { value: "c" },
      { value: "p" },
      { value: "b" },
      { value: "e" },
    ],
    [
      { value: "e" },
      { value: "b" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "b" },
      { value: "e" },
    ],
    [
      { value: "e" },
      { value: "b" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "b" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "b" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "b" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "b" },
      { value: "e" },
    ],

    [
      { value: "e" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "c" },
      { value: "b" },
      { value: "e" },
    ],
    [
      { value: "e" },
      { value: "b" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "c" },
      { value: "b" },
      { value: "e" },
    ],
    [
      { value: "e" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "b" },
      { value: "e" },
    ],
  ];

  const GHOST_TO_SVG = {
    g1: BLINKY,
    g2: PINKY,
    g3: INKY,
    g4: CLYED,
  };

  const createMap = () => {
    const svg = document.getElementById("svg-container");
    if (!svg) return;

    map.forEach((r, i) => {
      r.forEach((c, j) => {
        const rect = document.createElementNS(
          "http://www.w3.org/2000/svg",
          "rect"
        );
        rect.setAttribute("width", "30");
        rect.setAttribute("height", "30");
        c.value !== "b"
          ? rect.setAttribute("fill", "black")
          : rect.setAttribute("fill", "green");
        const left = j * 30;
        const top = i * 30;

        rect.setAttribute("x", left);
        rect.setAttribute("y", top);
        svg.appendChild(rect);
      });
    });

    map.forEach((r, i) => {
      r.forEach((c, j) => {
        let top = 0;
        let left = 0;
        switch (c.value) {
          case "c":
            const coin = document.createElementNS(
              "http://www.w3.org/2000/svg",
              "rect"
            );
            coin.setAttribute("id", `coin-${i}.${j}`);
            coin.setAttribute("width", "5");
            coin.setAttribute("height", "5");
            coin.setAttribute("fill", "yellow");

            left = j * 30 + 12.5;
            top = i * 30 + 12.5;
            coin.setAttribute("x", left);
            coin.setAttribute("y", top);
            svg.appendChild(coin);
            break;
          case "p":
            const powerBall = document.createElementNS(
              "http://www.w3.org/2000/svg",
              "circle"
            );
            powerBall.setAttribute("id", `powerball-${i}.${j}`);
            powerBall.setAttribute("r", "10");
            powerBall.setAttribute("fill", "white");

            left = j * 30 + 15;
            top = i * 30 + 15;
            powerBall.setAttribute("cx", left);
            powerBall.setAttribute("cy", top);
            svg.appendChild(powerBall);
            break;
          case "g1":
          case "g2":
          case "g3":
          case "g4":
            const ghost = GHOST_TO_SVG[c.value];
            console.log(ghost);
            svg.insertAdjacentHTML("beforeend", ghost);
            break;
          default:
            break;
        }
      });
    });
  };

  createMap();
})();
